"use strict";angular.module("yaadeinApp",["ngSanitize","ngAnimate","ngRoute","ngCookies","angucomplete-alt","ngNotify","angular.filter","mentio","angularMoment","ngNanoscroller","angularFileUpload","emoji","ngTagsInput","angular-loading-bar","bootstrapLightbox","oitozero.ngSweetAlert"]),!function(){var a=["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","\\+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface","sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel","bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn","house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de","one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_square","white_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"],b=new RegExp(":("+a.join("|")+"):","g");angular.module("emoji",[]).filter("emoji",function(){return function(a){return a.replace(b,function(a,b){return"<i class='emoji emoji_"+b+"'>"+b+"</i>"})}})}();var app=angular.module("yaadeinApp"),resolve={delay:function($q,$timeout){var delay=$q.defer();return $timeout(delay.resolve,50,!1),delay.promise}};app.config(["cfpLoadingBarProvider",function(cfpLoadingBarProvider){cfpLoadingBarProvider.latencyThreshold=0,cfpLoadingBarProvider.includeBar=!1,cfpLoadingBarProvider.parentSelector="#yaadein-title"}]),app.config(["LightboxProvider",function(LightboxProvider){LightboxProvider.templateUrl="/yaadein/views/lightbox.html",LightboxProvider.getImageUrl=function(imageUrl){return imageUrl}}]),app.config(["$locationProvider","$routeProvider",function($locationProvider,$routeProvider){$routeProvider.when("/",{templateUrl:"/yaadein/views/home.html",controller:"HomeController",resolve:resolve}).when("/profile/:enrolmentNo",{templateUrl:"/yaadein/views/profile.html",controller:"ProfileController",resolve:resolve}).when("/gallery/:enrolmentNo",{templateUrl:"/yaadein/views/gallery.html",controller:"GalleryController",resolve:resolve}).when("/hashtag/:hashtag",{templateUrl:"/yaadein/views/hashtag.html",controller:"HashtagController",resolve:resolve}).when("/post/:postId",{templateUrl:"/yaadein/views/post.html",controller:"PostController",resolve:resolve}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!0).hashPrefix("!")}]),app.config(["$interpolateProvider","$httpProvider",function($interpolateProvider,$httpProvider){$interpolateProvider.startSymbol("{~{").endSymbol("}~}"),$httpProvider.defaults.withCredentials=!0}]);var app=angular.module("yaadeinApp"),baseURL="http://172.25.55.156:60020/yaadein_api";app.service("TickerService",["$http","$q",function($http,$q){this.getTrending=function(){var deferred=$q.defer(),url=baseURL+"/trending/";return $http.get(url).success(function(x){deferred.resolve(x)}),deferred.promise},this.inviteUsers=function(x){var q=$q.defer(),URL=baseURL+"/invite/";return $http({method:"POST",url:URL,headers:{"Content-Type":"multipart/form-data"},data:{user_tags:x},file:[]}).success(function(d){q.resolve(d)}),q.promise}}]),app.service("HomeService",["$http","$q",function($http,$q){var deferred=$q.defer(),url=baseURL+"/home/";$http.get(url).success(function(d){deferred.resolve(d),d.profilePic=baseURL+d.profilePic,d.coverPic=originURL+d.coverPic;for(var posts=d.posts_data,i=0;i<posts.length;i+=1){posts[i].post_owner_pic=originURL+posts[i].post_owner_pic;for(var j=0;j<posts[i].image_url.length;j+=1)posts[i].image_url[j]=originURL+posts[i].image_url[j]}}),this.getLoggedUser=function(){return deferred.promise}}]),app.service("UserService",["$http","$q",function($http,$q){this.getUser=function(enrolmentNo){var url,def=$q.defer();return url=isNaN(enrolmentNo)?baseURL+"/spot/"+enrolmentNo.toString()+"/":baseURL+"/user/"+enrolmentNo.toString()+"/",$http.get(url).success(function(x){def.resolve(x)}),def.promise}}]),app.service("HashtagService",["$http","$q",function($http,$q){this.getHashtaggedPosts=function(tag){var deferred=$q.defer(),url=baseURL+"/tag/"+tag+"/";return $http.get(url).success(function(x){deferred.resolve(x)}),deferred.promise}}]),app.service("PostService",["$http","$q",function($http,$q){this.getPost=function(id){var def=$q.defer(),url=baseURL+"/post_disp/"+id+"/";return $http.get(url).success(function(x){def.resolve(x)}),def.promise},this.deletePost=function(id){var def=$q.defer(),url=baseURL+"/delete/"+id+"/";return $http.get(url).success(function(x){def.resolve(x)}),def.promise}}]);var app=angular.module("yaadeinApp");app.filter("romanNumber",function(){return function(input){return 1===input?"I":2===input?"II":3===input?"III":4===input?"IV":"V"}}),app.filter("hashtags",["$filter",function($filter){return function(text,target){if(!text)return text;var replacedText=$filter("linky")(text,target),targetAttr="";angular.isDefined(target)&&(targetAttr=' target="'+target+'"');var replacePattern1=/(|\s)#(\w*[a-zA-Z_]+\w*)/gim;return replacedText=text.replace(replacePattern1,'$1<a href="/hashtag/$2"'+targetAttr+' class="hash">#$2</a>')}}]);var app=angular.module("yaadeinApp");app.directive("showFocus",function($timeout){return function(scope,element,attrs){scope.$watch(attrs.showFocus,function(){$timeout(function(){element[0].focus()})},!0)}});var app=angular.module("yaadeinApp"),originURL="http://172.25.55.156:60020";app.controller("YaadeinController",["$scope","$http","$q","$timeout","$upload","$location","$routeParams","$route","ngNotify","TickerService","HomeService","PostService","Lightbox","SweetAlert",function($scope,$http,$q,$timeout,$upload,$location,$routeParams,$route,ngNotify,TickerService,HomeService,PostService,Lightbox,SweetAlert){ngNotify.config({theme:"pure",position:"top",duration:2e3,sticky:!1}),$scope.appname="Yaadein",$scope.navigationItems=[{id:"profile","class":"fa fa-user",url:"/profile/",hint:"Profile"},{id:"home","class":"fa fa-home",url:"/",hint:"Feed"},{id:"search","class":"fa fa-search",url:"#",hint:"Search"},{id:"post","class":"fa fa-pencil-square-o",url:"#",hint:"Post"},{id:"signOut","class":"fa fa-sign-out",url:originURL+"/logout/",hint:"Sign Out"}],$scope.currentNavItem=$scope.navigationItems[1],$scope.lastNavItem=$scope.navigationItems[1],$scope.setCurrentNavItem=function(navItem){return null===navItem?void($scope.currentNavItem={}):($scope.lastNavItem=$scope.currentNavItem,$scope.currentNavItem=navItem,void("search"===$scope.currentNavItem.id||"post"===$scope.currentNavItem.id?($("#centered").addClass("blur-back"),$(".right-sidebar").addClass("blur-back")):($location.path(navItem.url),$("#centered").removeClass("blur-back"),$(".right-sidebar").removeClass("blur-back"))))},$scope.isCurrentNavItem=function(navItem){return null!==$scope.currentNavItem&&$scope.currentNavItem.id===navItem.id},$scope.getCurrentNavItem=function(){return $scope.currentNavItem.id},$scope.enlargeImage=function(images,index){Lightbox.openModal(images,index)},$scope.closePost=function(){$("#centered").removeClass("blur-back"),$(".right-sidebar").removeClass("blur-back"),$("#postBox").fadeOut(300),$scope.setCurrentNavItem($scope.navigationItems[1]),$scope.clearNewPostData()},$scope.closeSearch=function(){$("#centered").removeClass("blur-back"),$(".right-sidebar").removeClass("blur-back"),$("#searchBox").fadeOut(300),$scope.setCurrentNavItem($scope.navigationItems[1])},$scope.showInviteBox=function(){$("#inviteBox").fadeIn(150),$("#centered").addClass("blur-back"),$(".right-sidebar").addClass("blur-back"),$scope.newPost.user_tags=[]},$scope.closeInvite=function(){$("#centered").removeClass("blur-back"),$(".right-sidebar").removeClass("blur-back"),$("#inviteBox").fadeOut(300),$scope.newPost.user_tags=[]},$scope.inviteUsers=function(){var prom=TickerService.inviteUsers($scope.newPost.user_tags);prom.then(function(x){"True"===x?(ngNotify.set("Invites have been sent!","success"),$scope.closeInvite()):ngNotify.set("Could not send invites.","error")})},$scope.showCoverHint=function(){$("#cover-upload-hint").fadeIn(150)},$scope.hideCoverHint=function(){$("#cover-upload-hint").fadeOut(150)},$scope.addOriginToImageUrl=function(resp){for(var results=resp.results,i=0;i<results.length;i+=1)results[i].profile_pic=originURL+results[i].profile_pic,results.id;return resp},$scope.personSelected=function(selected){$scope.setCurrentNavItem({}),$location.path("/profile/"+selected.originalObject.id)},$scope.user={};var LoggedUserData=HomeService.getLoggedUser();LoggedUserData.then(function(d){$scope.user=d,$scope.navigationItems[0].url+=$scope.user.enrolmentNo,$scope.navigationItems[0].hint=$scope.user.name}),$scope.trending=[];var tickPromise=TickerService.getTrending();tickPromise.then(function(d){$scope.trending=d.hashed}),$scope.newPost={post_owner:$scope.user.name,post_owner_enrol:$scope.user.enrolmentNo,post_owner_branch:$scope.user.label,post_owner_pic:$scope.user.profilePic,time:"",image_url:[],post_text:"",user_tags:[],spot:[],post_type:"A"},$scope.clearNewPostData=function(){$scope.newPost.post_text="",$scope.newPost.user_tags=[],$scope.newPost.image_url=[],$scope.images1.imageArray=[]},$scope.loadTags=function(query){var defer=$q.defer();return $http.get(originURL+"/yaadein_api/search/4/?q="+query,{ignoreLoadingBar:!0}).success(function(d){defer.resolve(d.results)}),defer.promise},$scope.loadSpots=function(query){var defer=$q.defer();return $http.get(originURL+"/yaadein_api/search/2/?q="+query,{ignoreLoadingBar:!0}).success(function(d){defer.resolve(d.results)}),defer.promise},$scope.$watch("coverpic",function(photo){null!==photo&&!function(file){$scope.uploadCover(file)}(photo)}),$scope.images1={imageArray:[]},$scope.addImage=function(files){$scope.images1.imageArray=$scope.images1.imageArray.concat(files)},$scope.deleteImage=function(i){$scope.images1.imageArray.splice(i,1)},$scope.deleteAllImages=function(){$scope.images1.imageArray=[]},$scope.upload=function(files){var uploadUrl=originURL+"/yaadein_api/user/"+$scope.user.enrolmentNo+"/";$routeParams&&$routeParams.enrolmentNo&&(uploadUrl=originURL+"/yaadein_api/user/"+$routeParams.enrolmentNo+"/");for(var sizeExceeded=!1,j=0;j<files.length;j+=1)files[j].size>2097152&&(sizeExceeded=!0);files.length<11&&""!==$scope.newPost.post_text&&!sizeExceeded?($("#uploadButton").prop("disabled",!0),$upload.upload({url:uploadUrl,headers:{"Content-Type":"multipart/form-data"},method:"POST",data:{post_text:$scope.newPost.post_text,user_tags:$scope.newPost.user_tags,spot:$scope.newPost.spot,post_type:$scope.newPost.post_type},file:files,withCredentials:!0}).progress(function(){$("#loading").fadeIn(100)}).success(function(data){$("#loading").fadeOut(100);var postPromise=PostService.getPost(data.posts_data[0].post_id);postPromise.then(function(d){d.post_owner_pic=originURL+d.post_owner_pic;for(var j=0;j<d.image_url.length;j+=1)d.image_url[j]=originURL+d.image_url[j];$scope.user.posts_data.unshift(d)}),$scope.closePost(),ngNotify.set("Successfully posted!","success")}).error(function(){$("#loading").fadeOut(100),ngNotify.set("Could not post!","error"),$("#uploadButton").prop("disabled",!1)})):files.length>10?ngNotify.set("Maximum 10 photos are allowed.","warn"):sizeExceeded?ngNotify.set("Maximum file size for a photo is 2MB","warn"):""===$scope.newPost.post_text&&(ngNotify.set("Type in some memories","warn"),$("#postMessageInput").addClass("error"),$("#postMessageInput").focus())},$scope.uploadCover=function(files){files&&1===files.length&&$upload.upload({url:originURL+"/yaadein_api/cover/upload/",headers:{"Content-Type":"multipart/form-data"},method:"POST",data:{},file:files,withCredentials:!0}).progress(function(){}).success(function(){ngNotify.set("Cover photo updated successfully!","success"),location.reload()}).error(function(){ngNotify.set("Could not update cover photo.","error")})},$scope.isLoggedUserPost=function(id){return $scope.user.enrolmentNo===id},$scope.deletePost=function(id,index){SweetAlert.swal({title:"Are you sure?",text:"Your post will be deleted forever",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",closeOnConfirm:!1,closeOnCancel:!1},function(isConfirm){if(isConfirm){var flag=PostService.deletePost(id);flag.then(function(d){"True"===d?($scope.user.posts_data.splice(index,1),SweetAlert.swal("Deleted!","Your post has been deleted.","success")):SweetAlert.swal("Error!","Your post could not be deleted.","error")})}else SweetAlert.swal("Cancelled","Your post wasn't deleted!","error")})},$scope.predictEmoji=function(term){var emojiList=[];return $http.get("/yaadein/scripts/emojis.json").then(function(response){return angular.forEach(response.data,function(item){item.name.toUpperCase().indexOf(term.toUpperCase())>=0&&emojiList.push(item)}),$scope.emojis=emojiList,$q.when(emojiList)})},$scope.getEmojiTextRaw=function(item){return":"+item.name+":"},$scope.macros={brb:"be right back",omw:"on my way",ty:"Thank you",hbd:"Happy Birthday!",g2g:"gotta go"}}]),app.controller("HomeController",["$scope","$http","HomeService",function($scope,$http){$scope.addToFeed=function(){$http.get("http://beta.json-generator.com/api/json/get/CHdvIym").success(function(ds){for(var i=0;i<ds.length;i+=1)$scope.posts.push(ds[i])})}}]),app.controller("ProfileController",["$routeParams","$scope","$http","UserService","PostService","ngNotify","SweetAlert",function($routeParams,$scope,$http,UserService,PostService,ngNotify,SweetAlert){$scope.currentUser={};var userPromise=UserService.getUser($routeParams.enrolmentNo);userPromise.then(function(d){$scope.currentUser=d,$scope.currentUser.profilePic=originURL+$scope.currentUser.profilePic,$scope.currentUser.coverPic=originURL+$scope.currentUser.coverPic;for(var posts=$scope.currentUser.posts_data,i=0;i<posts.length;i+=1){posts[i].post_owner_pic=originURL+posts[i].post_owner_pic;for(var j=0;j<posts[i].image_url.length;j+=1)posts[i].image_url[j]=originURL+posts[i].image_url[j]}}),$scope.deleteProfilePost=function(id,index){SweetAlert.swal({title:"Are you sure?",text:"Your post will be deleted forever",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",closeOnConfirm:!1,closeOnCancel:!1},function(isConfirm){if(isConfirm){var flag=PostService.deletePost(id);flag.then(function(d){"True"===d?($scope.currentUser.posts_data.splice(index,1),SweetAlert.swal("Deleted!","Your post has been deleted.","success")):SweetAlert.swal("Error!","Your post could not be deleted.","error")})}else SweetAlert.swal("Cancelled","Your post wasn't deleted!","error")})},$scope.isLoggedUserProfile=function(){return $scope.user.enrolmentNo===$scope.currentUser.enrolmentNo},$scope.addToFeed=function(){$http.get("http://beta.json-generator.com/api/json/get/CHdvIym").success(function(ds){for(var i=0;i<ds.length;i+=1)$scope.posts.push(ds[i])})}}]),app.controller("GalleryController",["$routeParams","$scope","dataUserService",function($routeParams,$scope,UserService){$scope.currentUser={};var userData=UserService.getUser($routeParams.enrolmentNo);userData.then(function(d){$scope.currentUser=d})}]),app.controller("HashtagController",["$routeParams","$scope","$http","HashtagService","PostService","ngNotify","SweetAlert",function($routeParams,$scope,$http,HashtagService,PostService,ngNotify,SweetAlert){$scope.hash=$routeParams.hashtag,$scope.posts=[];var dataPromise=HashtagService.getHashtaggedPosts($routeParams.hashtag);dataPromise.then(function(d){for(var i=0;i<d.posts_data.length;i+=1){d.posts_data[i].post_owner_pic=originURL+d.posts_data[i].post_owner_pic;for(var j=0;j<d.posts_data[i].image_url.length;j+=1)d.posts_data[i].image_url[j]=originURL+d.posts_data[i].image_url[j]}$scope.posts=d.posts_data}),$scope.deleteHashtagPost=function(id,index){SweetAlert.swal({title:"Are you sure?",text:"Your post will be deleted forever",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",closeOnConfirm:!1,closeOnCancel:!1},function(isConfirm){if(isConfirm){var flag=PostService.deletePost(id);flag.then(function(d){"True"===d?($scope.posts.splice(index,1),SweetAlert.swal("Deleted!","Your post has been deleted.","success")):SweetAlert.swal("Error!","Your post could not be deleted.","error")})}else SweetAlert.swal("Cancelled","Your post wasn't deleted!","error")})}}]),app.controller("PostController",["$routeParams","$scope","$q","$http","PostService",function($routeParams,$scope,$q,$http,PostService){$scope.post={};var postData=PostService.getPost($routeParams.postId);postData.then(function(d){for(var j=0;j<d.image_url.length;j+=1)d.image_url[j]=originURL+d.image_url[j];d.post_owner_pic=originURL+d.post_owner_pic,$scope.post=d})}]);